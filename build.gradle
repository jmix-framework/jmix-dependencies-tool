tasks.register('assembleBundle', Copy) {
    dependsOn tasks.copyDeptool, tasks.copyResolver
}

tasks.register('zipBundle', Zip) {
    dependsOn tasks.assembleBundle
    archiveFileName = "deptool.zip"
    destinationDirectory = layout.buildDirectory.dir('distribution')
    from project.layout.buildDirectory
}

tasks.register('copyDeptool', Copy) {
    dependsOn gradle.includedBuild('deptool').task(':installDist')
    from project.layout.projectDirectory.dir('deptool/build/install')
    into project.layout.buildDirectory.dir('bundle')
}

tasks.register('copyResolver', Copy) {
    from (project.layout.projectDirectory.dir('resolver')) {
        exclude '**/build', '**/.gradle'
    }
    into project.layout.buildDirectory.dir('bundle/deptool/resolver')
}